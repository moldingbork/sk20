$(document).ready(function(){function e(){if(D)return l(),!1;T.removeClass("hide")}function r(){5===E&&y.text(E),setTimeout(function(){E--,y.text(E),E>0?r():($("#prospekt-url").get(0).click(),T.addClass("hide"),E=5)},1e3)}function o(){var e=C.is(":checked"),r=h.val().length>=1,o=f.val().length>=1&&s(f.val()),t=v.val().length>=1,d=k.val().length>=1;return e&&r&&o&&t&&d?(a(e,r,o,t,d),!0):(a(e,r,o,t,d),!1)}function s(e){return new RegExp(/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/).test(e)}function a(e,r,o,s,a){r?h.removeClass("error"):h.addClass("error"),o?f.removeClass("error"):f.addClass("error"),s?v.removeClass("error"):v.addClass("error"),a?k.removeClass("error"):k.addClass("error");var t=C.parent().find("label");e?t.removeClass("error"):t.addClass("error")}function t(){if(i.hasClass("active"))return i.removeClass("active"),$("body").removeClass("stop-scroll"),!1;$("body").addClass("stop-scroll"),i.addClass("active")}function d(){setTimeout(function(){c.removeClass("hide"),x.removeClass("hide"),p.addClass("hide"),T.removeClass("hide"),u.text(""),u.val(""),m.prop("checked",!1),C.prop("checked",!1),b.addClass("hide"),g.removeClass("hide")},500)}function l(){T.addClass("hide"),c.addClass("hide"),x.addClass("hide"),p.removeClass("hide")}var n=$("#prospekt-url"),i=$("#prospect-modal"),c=$("#download-prospekt-form"),p=$("#download-prospekt-link-wrapper"),u=$("#module-textarea"),m=$("#newsLetter"),C=$("#accept"),h=$("#prospect-form-name"),f=$("#prospect-form-email"),v=$("#prospect-form-firm"),k=$("#prospect-form-phone"),w=$(".title-prospekt-name"),x=$("#module-description"),b=$("#download-prospect-loader"),g=$("#submit-text"),y=$("#prospekt-download-counter"),T=$("#text-auto-download"),j=$("#modalClose"),z=$("#download-prospekt-btn"),D=!1;z.click(function(){e(),t()}),j.click(function(){t(),d()}),c.submit(function(e){if(e.preventDefault(),!o())return!1;$.ajax({url:$(this).attr("action"),method:$(this).attr("method"),data:$(this).serialize(),dataType:"json",beforeSend:function(){g.addClass("hide"),b.removeClass("hide")},success:function(){D=!0,c.addClass("hide"),x.addClass("hide"),p.removeClass("hide"),r()},error:function(){}})});var E=5});